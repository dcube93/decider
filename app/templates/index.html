{% extends "base.html" %}

{% block content %}
    <h1>Hi, {{ current_user.username }}!</h1>
    <h1>Lets make some decisions for you</h1>
    <!--{% for post in posts %}
    <div><p>{{ post.author.username }} says: <b>{{ post.body }}</b></p></div>
    {% endfor %}-->
    <form method="POST" action="{{ url_for('decide') }}">
        <!--
        <label for="options">Enter options separated by commas:</label>
        <input type="text" name="options">
        <button type="submit">Spin</button>
        -->
        <div id="input-container">
            <div class="form-group">
                <label for="option-1">Option 1:</label>
                <input type="text" class="form-control" name="option-1" required>
            </div>
            <div class="form-group">
                <label for="option-2">Option 2:</label>
                <input type="text" class="form-control" name="option-2" required>
            </div>
        </div>
        <button type="button" class="btn btn-primary" id="add-input">Add Option</button>
        <button type="submit" class="btn btn-success">Decide</button>
    </form>
{% endblock %}

{% block scripts %}
<script>
    let inputCount = 2;
    const inputContainer = document.getElementById('input-container');
    const addInputButton = document.getElementById('add-input');
    addInputButton.addEventListener('click', () => {
        inputCount++;
        const newInputGroup = document.createElement('div');
        newInputGroup.classList.add('form-group');
        newInputGroup.innerHTML = `
            <label for="option-${inputCount}">Option ${inputCount}:</label>
            <input type="text" class="form-control" name="option-${inputCount}" required>
        `;
        inputContainer.parentNode.insertBefore(newInputGroup, addInputButton);
    });
</script>
{% endblock %}

